@page "/test"
@using WebDevelopment.Shared.DTO



<InputFile OnChange="OnFileChanged">


</InputFile>

@if(FileDto.Content != null)
{
    <img src="@($"data:{FileDto.ContentType};base64,{Convert.ToBase64String(FileDto.Content)}")" />
}




@code {
    private FileDto FileDto { get; set; } = new();


    private async Task OnFileChanged(InputFileChangeEventArgs file)
    {
        if (file == null)
            return;

        int maxFileSizeBytes = 2 * 1024 * 1024;

        using var memoryStream = new MemoryStream();



        var files = file.GetMultipleFiles().ToList();
        var firstFile = files.FirstOrDefault();

        await firstFile.OpenReadStream(maxFileSizeBytes).CopyToAsync(memoryStream);

        FileDto.ContentType = file.File.ContentType;
        FileDto.Content = memoryStream.ToArray();
        FileDto.Name = firstFile.Name;
    }
}
